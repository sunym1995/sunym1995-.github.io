(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{356:function(t,a,s){"use strict";s.r(a);var n=s(0),e=Object(n.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"invalid-事件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#invalid-事件"}},[t._v("#")]),t._v(" invalid 事件")]),t._v(" "),s("p",[t._v("用户提交表单时，如果表单元素的值不满足校验条件，就会触发invalid事件。")]),t._v(" "),s("div",{staticClass:"language-html extra-class"},[s("pre",{pre:!0,attrs:{class:"language-html"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("form")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("input")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("type")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("text"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("required")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("oninvalid")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("console.log('invalid input')"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("button")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("type")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("submit"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("提交"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("button")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("form")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),s("p",[t._v("上面代码中，输入框是必填的。如果不填，用户点击按钮提交时，就会触发输入框的invalid事件，导致提交被取消。")]),t._v(" "),s("h2",{attrs:{id:"form表单元素内置验证方法和属性"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#form表单元素内置验证方法和属性"}},[t._v("#")]),t._v(" form表单元素内置验证方法和属性")]),t._v(" "),s("p",[t._v("3个方法"),s("code",[t._v("checkValidity()``reportValidity()``setCustomValidity()")]),t._v(",一个属性"),s("code",[t._v("validity")])]),t._v(" "),s("h3",{attrs:{id:"checkvalidity-方法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#checkvalidity-方法"}},[t._v("#")]),t._v(" checkValidity()方法")]),t._v(" "),s("p",[t._v("会检查元素是否有任何输入约束条件，并且检查值是否符合约束条件. 如果值是不符合约束条件的, 浏览器就会在该元素上触发invalid 事件,  然后返回 false.，符合约束条件，返回true。")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" isSelectPassing "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("querySelector")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'select'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("checkValidity")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// true或false")]),t._v("\n")])])]),s("h3",{attrs:{id:"reportvalidity-方法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#reportvalidity-方法"}},[t._v("#")]),t._v(" reportValidity()方法")]),t._v(" "),s("p",[t._v("如果form表单的子表单控件满足验证限制条件，则该方法返回 true ，否则返回false，并触发invalid 事件和验证提示消息。")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("document"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("querySelector")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'select'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("reportValidity")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h3",{attrs:{id:"setcustomvalidity-方法。"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#setcustomvalidity-方法。"}},[t._v("#")]),t._v(" setCustomValidity()方法。")]),t._v(" "),s("p",[t._v("设置自定义的验证，我们可以使用这个方法自定义提示文字。")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("ele"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setCustomValidity")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("str"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h3",{attrs:{id:"validity属性与validitystate对象"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#validity属性与validitystate对象"}},[t._v("#")]),t._v(" validity属性与ValidityState对象")]),t._v(" "),s("p",[t._v("每一个标准的表单控件，例如输入框，下拉框以及单复选框都内置一个validity属性，这是个只读属性，可以返回当前元素各种验证状态，例如：")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("document"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("querySelector")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'select'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("validity"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("返回一个ValidityState对象，包含的属性和属性值如下：")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("badInput"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("\ncustomError"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("\npatternMismatch"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("\nrangeOverflow"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("\nrangeUnderflow"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("\nstepMismatch"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("\ntooLong"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("\ntooShort"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("\ntypeMismatch"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("\nvalid"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("\nvalueMissing"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n")])])]),s("ul",[s("li",[t._v("badInput"),s("br"),t._v("\n只读。属性值为布尔类型。输入框里面的值浏览器没办法进行转换。例如'number'类型输入框里面是中文字符（MDN上说法，但是自己测试无法复现），此时值是true。此属性IE浏览器并不支持。此属性建议了解即可。")]),t._v(" "),s("li",[t._v("customError"),s("br"),t._v("\n只读。属性值为布尔类型。如果元素调用setCustomValidity()方法设置了自定义的验证信息则值是true。")]),t._v(" "),s("li",[t._v("patternMismatch"),s("br"),t._v("\n只读。属性值为布尔类型。和指定的pattern正则属性值不匹配的时候值是true。会匹配:invalid这个CSS伪类。")]),t._v(" "),s("li",[t._v("rangeOverflow"),s("br"),t._v("\n只读。属性值为布尔类型。超过max属性设置的值的时候会是true。同时会匹配CSS :invalid和:out-of-range伪类。")]),t._v(" "),s("li",[t._v("rangeUnderflow"),s("br"),t._v("\n只读。属性值为布尔类型。小于min属性设置的值的时候会是true。同时会匹配CSS :invalid和:out-of-range伪类。")]),t._v(" "),s("li",[t._v("stepMismatch"),s("br"),t._v("\n只读。属性值为布尔类型。输入框当前值和step属性值不匹配的时候stepMismatch的值会是true。同时元素会匹配CSS :invalid和:out-of-range伪类。")]),t._v(" "),s("li",[t._v("tooLong"),s("br"),t._v("\n只读。属性值为布尔类型。输入内容长度超出maxlength的限制时候会是true。同时会匹配CSS :invalid和:out-of-range伪类。")]),t._v(" "),s("li",[t._v("tooShort"),s("br"),t._v("\n只读。属性值为布尔类型。输入内容长度不足minlength的限制时候会是true。同时会匹配CSS :invalid和:out-of-range伪类。此属性IE浏览器并不支持，因为不支持minlength属性。")]),t._v(" "),s("li",[t._v("typeMismatch"),s("br"),t._v("\n只读。属性值为布尔类型。输入框的值和输入框类型不匹配的时候该属性值会是true。例如输入框type类型是email或者url时候。如果值是true，会匹配:invalid这个CSS伪类。")]),t._v(" "),s("li",[t._v("valid"),s("br"),t._v("\n只读。属性值为布尔类型。当前元素是否完全验证通过，通过是true，会匹配:valid这个CSS伪类；不通过是false，会匹配:invalid这个CSS伪类。")]),t._v(" "),s("li",[t._v("valueMissing"),s("br"),t._v("\n只读。属性值为布尔类型。如果元素设置了required属性，同时输入框的值为空，则该属性值是true。如果值是true，会匹配:invalid这个CSS伪类。")])]),t._v(" "),s("h2",{attrs:{id:"参考链接"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#参考链接"}},[t._v("#")]),t._v(" 参考链接")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://www.zhangxinxu.com/wordpress/2019/08/js-checkvalidity-setcustomvalidity/",target:"_blank",rel:"noopener noreferrer"}},[t._v("张鑫旭的博客"),s("OutboundLink")],1)])])}),[],!1,null,null,null);a.default=e.exports}}]);